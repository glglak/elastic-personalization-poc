<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600">
  <!-- Background -->
  <rect width="1000" height="600" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="500" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">Elasticsearch Content Personalization - Architecture</text>
  
  <!-- Client Layer -->
  <rect x="400" y="70" width="200" height="60" rx="10" ry="10" fill="#91c5ff" stroke="#0066cc" stroke-width="2" />
  <text x="500" y="105" font-family="Arial" font-size="16" text-anchor="middle" fill="#333">Client Applications</text>
  
  <!-- API Layer -->
  <rect x="250" y="170" width="500" height="100" rx="10" ry="10" fill="#b3e6cc" stroke="#1a8c55" stroke-width="2" />
  <text x="500" y="195" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#333">API Layer (.NET Core 8)</text>
  
  <!-- API Controllers -->
  <rect x="280" y="210" width="130" height="40" rx="5" ry="5" fill="#8cd9a8" stroke="#1a8c55" stroke-width="1" />
  <text x="345" y="235" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Content API</text>
  
  <rect x="435" y="210" width="130" height="40" rx="5" ry="5" fill="#8cd9a8" stroke="#1a8c55" stroke-width="1" />
  <text x="500" y="235" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Personalization API</text>
  
  <rect x="590" y="210" width="130" height="40" rx="5" ry="5" fill="#8cd9a8" stroke="#1a8c55" stroke-width="1" />
  <text x="655" y="235" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">User Interaction API</text>
  
  <!-- Core Layer -->
  <rect x="250" y="310" width="500" height="100" rx="10" ry="10" fill="#ffe6b3" stroke="#cc9933" stroke-width="2" />
  <text x="500" y="335" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#333">Core Layer</text>
  
  <!-- Core Components -->
  <rect x="280" y="350" width="130" height="40" rx="5" ry="5" fill="#ffd480" stroke="#cc9933" stroke-width="1" />
  <text x="345" y="375" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Entities</text>
  
  <rect x="435" y="350" width="130" height="40" rx="5" ry="5" fill="#ffd480" stroke="#cc9933" stroke-width="1" />
  <text x="500" y="375" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Interfaces</text>
  
  <rect x="590" y="350" width="130" height="40" rx="5" ry="5" fill="#ffd480" stroke="#cc9933" stroke-width="1" />
  <text x="655" y="375" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Models</text>
  
  <!-- Infrastructure Layer -->
  <rect x="250" y="450" width="500" height="100" rx="10" ry="10" fill="#ffb3b3" stroke="#cc4d4d" stroke-width="2" />
  <text x="500" y="475" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#333">Infrastructure Layer</text>
  
  <!-- Infrastructure Components -->
  <rect x="280" y="490" width="130" height="40" rx="5" ry="5" fill="#ff9999" stroke="#cc4d4d" stroke-width="1" />
  <text x="345" y="515" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Data Context</text>
  
  <rect x="435" y="490" width="130" height="40" rx="5" ry="5" fill="#ff9999" stroke="#cc4d4d" stroke-width="1" />
  <text x="500" y="515" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Services</text>
  
  <rect x="590" y="490" width="130" height="40" rx="5" ry="5" fill="#ff9999" stroke="#cc4d4d" stroke-width="1" />
  <text x="655" y="515" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">External Clients</text>
  
  <!-- Data Stores -->
  <rect x="100" y="350" width="100" height="100" rx="10" ry="10" fill="#d9d9d9" stroke="#808080" stroke-width="2" />
  <text x="150" y="390" font-family="Arial" font-size="16" text-anchor="middle" fill="#333">SQL Server</text>
  <text x="150" y="410" font-family="Arial" font-size="12" text-anchor="middle" fill="#555">User Interactions</text>
  
  <rect x="800" y="350" width="100" height="100" rx="10" ry="10" fill="#d9d9d9" stroke="#808080" stroke-width="2" />
  <text x="850" y="390" font-family="Arial" font-size="16" text-anchor="middle" fill="#333">Elasticsearch</text>
  <text x="850" y="410" font-family="Arial" font-size="12" text-anchor="middle" fill="#555">Content Index</text>
  
  <!-- Connections -->
  <!-- Client to API -->
  <line x1="500" y1="130" x2="500" y2="170" stroke="#666" stroke-width="2" stroke-dasharray="5,5" />
  
  <!-- API to Core -->
  <line x1="345" y1="250" x2="345" y2="310" stroke="#666" stroke-width="2" />
  <line x1="500" y1="250" x2="500" y2="310" stroke="#666" stroke-width="2" />
  <line x1="655" y1="250" x2="655" y2="310" stroke="#666" stroke-width="2" />
  
  <!-- Core to Infrastructure -->
  <line x1="345" y1="390" x2="345" y2="450" stroke="#666" stroke-width="2" />
  <line x1="500" y1="390" x2="500" y2="450" stroke="#666" stroke-width="2" />
  <line x1="655" y1="390" x2="655" y2="450" stroke="#666" stroke-width="2" />
  
  <!-- Infrastructure to Data Stores -->
  <line x1="280" y1="510" x2="200" y2="400" stroke="#666" stroke-width="2" />
  <line x1="720" y1="510" x2="800" y2="400" stroke="#666" stroke-width="2" />
  
  <!-- Personalization Flow -->
  <path d="M350,530 C350,550 500,560 650,530" stroke="#cc4d4d" stroke-width="3" fill="none" stroke-dasharray="10,3" />
  <text x="500" y="570" font-family="Arial" font-size="14" text-anchor="middle" fill="#cc4d4d">Personalization Engine</text>
  
  <!-- Legend -->
  <rect x="800" y="490" width="15" height="15" fill="#b3e6cc" stroke="#1a8c55" stroke-width="1" />
  <text x="820" y="503" font-family="Arial" font-size="12" fill="#333" text-anchor="start">API Layer</text>
  
  <rect x="800" y="510" width="15" height="15" fill="#ffe6b3" stroke="#cc9933" stroke-width="1" />
  <text x="820" y="523" font-family="Arial" font-size="12" fill="#333" text-anchor="start">Core Layer</text>
  
  <rect x="800" y="530" width="15" height="15" fill="#ffb3b3" stroke="#cc4d4d" stroke-width="1" />
  <text x="820" y="543" font-family="Arial" font-size="12" fill="#333" text-anchor="start">Infrastructure Layer</text>
  
  <rect x="800" y="550" width="15" height="15" fill="#d9d9d9" stroke="#808080" stroke-width="1" />
  <text x="820" y="563" font-family="Arial" font-size="12" fill="#333" text-anchor="start">Data Stores</text>
</svg>
